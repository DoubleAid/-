*****
1. [安装必要ubuntu 包](#安装必要ubuntu+包)
2. [创建python虚拟环境](#创建python虚拟环境)
3. [安装必要的Flask包](#安装必要的Flask包)
4. [创建测试flask应用](#创建测试flask应用)  
    4.1 [新建启动flask应用的python文件](#新建一个启动flask应用的python文件)  
    4.2 [测试flask应用](#测试flask应用)  
5. [创建wsgi接入点](#创建wsgi接入点)
*****
## 安装必要ubuntu 包
因为我自己使用python3进行开发，这里以python3为例
```
$ sudo apt-get update
$ sudo apt-get install python3-pip python3-dev
$ sudo pip3 install virtualenv
```
## 创建python虚拟环境
为了防止和系统的python环境发生冲突，需要使用virtualenv构建一个虚拟环境
这里使用<pre>/home/web</pre> 作为微博文件的位置
1. 创建文件位置
```
$ mkdir /home/web
$ cd /home/web
```
2. 创建一个虚拟环境进行Flask项目开发
```
$ virtualenv env[虚拟环境名，这里使用env]
```
3. 激活虚拟环境
```
$ source /home/web/env/bin/activate
```
此时操作视图会转变为
```
(env)user@host:/home/web$
```
你可以通过以下命令停用虚拟环境
```
(env) $ deactivate
```
## 安装必要的Flask包
安装前先激活虚拟环境，在虚拟环境中安装
1. 安装 uwsgi
```
(env) $ pip install uwsgi
```
2. 安装 必要的python 包
安装列表
```
Flask
Flask-Bootstrap
Flask-Login
Flask-Script
Flask-WTF
Flask-Session
Flask-Markdown
Jinja2
Markdown
```
## 创建测试flask应用
#### 新建一个启动flask应用的python文件
```
(env) $ touch /home/web/webstart.py
```
例化一个Flask对象。我们可以使用它来定义在请求特定路由时应运行的功能
```python
from flask import Flask
app = Flask(__name__)

@app.route("/")
def hello():
    return "ARE YOU OK"
    
if __name__ == "__main__":
    app.run(host="0.0.0.0")
```
#### 测试flask应用
首先关闭防火墙,放开5000端口
```
(env) $ sudo ufw allow 5000
```
运行/home/web/webstart.py
```
(env) $ python webstart.py
```
在浏览器中测试，输入 服务器的公网地址或者域名:5000 进行访问
```
http://server_domain_or_IP:5000
```
如果你能看到 ARE YOU OK 就说明你创建成功了，在终端窗口中按Ctrl+C就可以停止Flask开发服务器
## 创建wsgi接入点
当我们退出终端端口时，Flask服务器也会关闭，我不可能一直运行webstart.py文件，我还要学习呢，因此创建uwsgi服务器与应用程序配合
我们之前已经安装过uwsgi包了
#### 测试uwsgi服务
    ```
    (env) $ uwsgi --socket 0.0.0.0:5000 --protocol=http -w webstart:app
    ```
    webstart为你创建的python文件的名称，app为你创建的flask对象
    访问 http://server_domain_or_IP:5000 你可以看到 ARE YOU OK 确认功能正常后，在终端窗口按 Ctrl+C
    退出虚拟环境
    ```
    (env) $ deactivate
    ```
    此时所有命令都会使用系统的python环境
#### 创建一个uwsgi配置文件

# 未完待续



## 参考文档
1. [DigitalOcean](https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-uwsgi-and-nginx-on-ubuntu-16-04)
